## 브라우저 : 소프트웨어 프로그램, 웹 탐색기, 웹 브라우저

브라우저 : 웹 서버와 양방향 통신, 컨텐츠(동영상,HTML 문서 등)를 열함할 수 있게 해주는 GUI 기반의 소프트웨어

### 웹 (World Wide Web)

- 브라우저 상에서 제공, 컨텐츠 정보를 하이퍼텍스트 방식으로 연결해서 제공
- HTML 언어를 사용해서 작성된 문서 형태로 제공이 되며, 이런 문서를 **웹 페이지**라고 부름
- 종류 : 크롬, 넷스케이프 등
- 동작 원리
  1. 사용자가 원하는 자원을 브라우저에 요청
  2. 브라우저는 웹 서버에서 해당 자원을 요청
  3. 웹 서버의 응답을 받아 브라우저는 해당 자원을 표시
     ![Codestates](https://user-images.githubusercontent.com/104412610/191722364-2678726b-71dd-43d0-a3c8-934271425d60.png)

브라우저 구조

- ![Codestates 2](https://user-images.githubusercontent.com/104412610/191722817-4422bf93-c36d-4323-8be4-4952509b9f90.png)
- UI : 유저와 가장 밀접하게 닿아있음, 주소 표시줄, 이전/다음 버튼, 북마크 메뉴 등에 관련된 GUI 부분

브라우저 엔진

-
- UI와 렌더링 엔진 사이에서 동작
- DOM 문서 자료구조를 구현
- 렌더링 + 브라우저 엔진을 보통 묶어서 부름
- 브라우저 엔진 종류
  - 게코(Gecko) : 모질라 재단 브라우저 엔진, 파이어폭스가 탑재
  - 웹킷(webkit) : KHTML에서 파생된 브라우저 엔진, 사파리가 탑재
  - 블링크(Bilnk) : 웹킷에서 파생된 브라우저 엔진, 크롬,오페라가 탑재
  - 트라이던트(Trident) : 마이크로소프트 브라우저 엔진, 익스플로러가 탑재
  - 엣지HTML : 트라이던트에서 파생, 마이크로스프트 엣지 스파르탄 버전까지 탑재, 현재는 블링크

## 렌더링 엔진

- 요청한 콘텐츠를 화면에 출력하는 역할
- HTML,CSS 등을 파싱, 최종적으로 화면에 그림
- 브라우저 엔진과 밀접하게 결합(브라우저 엔진과 통합해서 보는 시각이 많음)

## 통신

- HTTP 같은 네트워크 호출, 플랫폼의 독립적인 인터페이스, 플랫폼 하부에서 시랳ㅇ

## 자바스크립트 해석기

- 대부분의 웹 페이지의 웹 인터렉션의 javascript가 사용됨.
- 해석기 엔진
  - Rhino : 모질라 재단이 운영하는 오픈소스 엔진, 자바로 개발됨.
  - SpliderMonkey : 최초 자바스크립트 엔진, 넷스케이프 내비게이터를 지원, 현재는 파이어폭스를 지원
  - V8 : 구글이 개발한 오픈 소스 엔진
  - JavascriptCore : 애플에서 개발, Webkit 프레임워크를 위해 개발됐지만, 현재 사파리와 React Native App을 지원
  - Chakra : 마이크로소프트 개발 엔진, Edge 브라우저 지원

### V8 엔진 메모리 구조

- 힙 메모리
  - 동적 메모리 할당에 사용되는 자료 구조, 객체 또는 동적 데이터를 저장
  - V8 엔진 내부에서 가장 큰 공간을 차지, 가비지 컬렉션이 발생하는 곳
- Call Stack
  - JS는 싱글 스레드 기반의 언어, 콜 스택이 하나라는 의미, 한번에 한 작업만 가능
  - 후입선출 구조 (First in Last out) : 처음 입력된 데이터가 나중에 나옴
  - **스택 프레임** : 콜 스택에 쌓이는 데이터
  - **스택 오버플로** : 콜 스택 내부의 동일한 스택 프레임이 예상치 못한 수로 쌓일 떄 일어남.
  - **스택의 추적** : 에러 메세지 발생 시 어디서 발생한지 알수 있는 것

UI 백엔드 : 렌더링 엔진이 분석한 Render Tree를 브라우저에 그리는 역할

-
- 명령어 라인 인터페이스(Command Line Interface) : 문자로만 명령어를 입력해 처리해야 하는 인터페이스
- 일괄 처리 인터페이스(Batch Interface) : 사용자가 배치 처리에 앞서 배치 작업의 모든 세부사항을 지정,  
   모든 처리가 완료되면 출력을 수신하는 비대화형 사용자 인터페이스

자료 저장소

-
- 자료를 저장하는 계층, 웹 브라우저가 직접 데이터를 저장할 수 있는 공간 -> 웹 스토리지
- 오리진마다 단 하나씩만 존재, 오리진은 도메인과 프로토콜 한 쌍으로 이루어진 식별자

### 웹스토리지 대표적 기능

- 브라우저 컨텍스트 내에서 저장한 데이터를 가지고 활용할 수 있기에 복구 및 백업에 관련된 기능에 주로 사용
  - 블로글 작성 시 사용자 창을 벗어난 경우 복구 혹은 백업 기능
  - 사용자가 입력 form을 통해 입력하다 페이지에서 벗어난 경우 복구 및 백업해주는 기능
  - 현재 읽은 글의 히스토리 저장

### 웹 스토리지 종류(로컬 스토리지, 세션 스토리지)

- 로컬 스토리지 : 보관 기한이 없는 데이터 저장, 도메인 마다 별도의 로컬스토리지 생성
- 세션 스토리지 : 하나의 세션만을 위한 데이터 저장, 데이터를 지속 보관하지 않고, 브라우징되고 있는 컨텍스트 내에서만 데이터가 유지, 브라우저가 꺼지면 해당 데이터 사라짐.
  - 브라우징 : 브라우저 프로그램을 실행해서 인터넷에서 필요한 정보를 찾는 행위
  - 브라우저 컨텍스트 : 브라우저가 문서를 표시하는 환경

## 브라우저 렌더링

![Codestates3](https://user-images.githubusercontent.com/104412610/191744721-56a49dc5-88fc-4db9-8c87-77dee2f4a31e.png)

- 렌더링 과정
  - 브라우저가 서버에서 HTML,JS,CSS 받아옴
  - 렌더링 엔진은 언어를 파싱 HTML을 DOM, CSS를 CSSOM이라는 각자의 트리로 만듦
  - 그 후 둘을 결합하여 Render Tree 구축
  - 레이아웃을 통해 요소 배치를 결정
  - 레이아웃이 끝나면 UI 백엔드에서 Render 트리를 화면에 그림
- 파싱 : 프로그래밍 언어 파일을 실행시키기 위해 구문을 분석하는 과정, HTML코드의 태그를 토큰으로 분해하고, 토큰들을 문법적 의미와 구조에 따라 노드 요소로 변환

## 리플로우, 리페인트

- 리플로우 : JS로 DOM이 변경되면 렌더 트리 과정과 layout과정이 다시 실행됨. -> 화면 출력인 리페인트도 발생. 리플로우 발생되면 렌더 트리 제작, layout 구성, 리페인트 과정이 필연적 -> **프레임 드랍 발생 가능**
- 리페인트 : 화면을 다시 그리는 과정
- 프레임 드랍 방지하는 방법
  - 불필요한 레이아웃 줄이기
  - CSS에서 레이아웃, 페인트를 발생시키는 속성들 확인하기
  - 영향을 주는 노드를 줄인다.
